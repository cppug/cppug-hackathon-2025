<nav class="site-nav" aria-label="Main Navigation">
    <div class="nav-container">
        <div class="nav-logo">
            <img src="{{ '/assets/images/logos/calgary-power-platform-logo.webp' | relative_url }}" alt="Calgary Power Platform User Group" loading="lazy">
            <a href="{{ '/' | relative_url }}" class="nav-title">CPPUG Hackathon</a>
        </div>
        
        <!-- Mobile menu toggle button -->
        <button class="mobile-menu-toggle" aria-label="Toggle mobile menu" aria-expanded="false">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
        </button>

        <ul class="nav-links" id="nav-links">
            <li><a href="{{ '/' | relative_url }}#about">About</a></li>
            <li><a href="{{ '/project-ideas/' | relative_url }}">Project Ideas</a></li>
            <li><a href="{{ '/' | relative_url }}#sponsors">Sponsors</a></li>
            <li><a href="{{ '/' | relative_url }}#agenda">Agenda</a></li>
            <li><a href="{{ '/' | relative_url }}#community">Community</a></li>
            <li><a href="{{ '/faq/' | relative_url }}">FAQ & Rules</a></li>
            <li><a href="{{ '/' | relative_url }}#contact">Contact</a></li>
        </ul>
    </div>
</nav>

<script>
// Mobile navigation toggle functionality
document.addEventListener('DOMContentLoaded', function() {
    const mobileToggle = document.querySelector('.mobile-menu-toggle');
    const navLinks = document.querySelector('.nav-links');
    const body = document.body;
    
    if (mobileToggle && navLinks) {
        mobileToggle.addEventListener('click', function() {
            const isExpanded = this.getAttribute('aria-expanded') === 'true';
            
            // Toggle menu visibility
            navLinks.classList.toggle('nav-open');
            
            // Update ARIA attribute
            this.setAttribute('aria-expanded', !isExpanded);
            
            // Toggle hamburger animation
            this.classList.toggle('menu-open');
            
            // Toggle body scroll lock on mobile
            if (window.innerWidth <= 768) {
                body.classList.toggle('menu-open');
            }
        });

        // Close menu when clicking on a nav link (mobile)
        const navLinksItems = navLinks.querySelectorAll('a');
        navLinksItems.forEach(link => {
            link.addEventListener('click', function() {
                if (window.innerWidth <= 768) {
                    closeMenu();
                }
            });
        });

        // Close menu when clicking outside (mobile)
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !mobileToggle.contains(event.target) && 
                !navLinks.contains(event.target)) {
                closeMenu();
            }
        });

        // Handle window resize
        window.addEventListener('resize', function() {
            if (window.innerWidth > 768) {
                closeMenu();
            }
        });

        // Handle escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape' && navLinks.classList.contains('nav-open')) {
                closeMenu();
                mobileToggle.focus(); // Return focus to toggle button
            }
        });

        // Helper function to close menu
        function closeMenu() {
            navLinks.classList.remove('nav-open');
            mobileToggle.setAttribute('aria-expanded', 'false');
            mobileToggle.classList.remove('menu-open');
            body.classList.remove('menu-open');
        }
    }
});
</script>
